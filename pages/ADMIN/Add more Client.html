<!DOCTYPE html>
<html lang="en">

<head>
    <title>fitnesswebsite</title>
    <link rel="stylesheet" href="../../assets/css/Add More Client style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <header class="header">
        <div class="logo">
            <img src="../../assets/img/logonew2.png" width="200px" alt="logo" />
        </div>
    </header>

    <section>
        <form onsubmit="registration(event)">
            <div class="details">
                <div>
                    <h2>Add more Client</h2>
                </div>
                <div>
                    <input class="input" pattern="[a-zA-Z{12}]+" type="text" placeholder="First Name"
                        id="user_firstname" required="true" />
                </div>
                <div>
                    <input class="input" pattern="[a-zA-Z{12}]+" type="text" placeholder="Last Name" id="user_lastname"
                        required="true" />
                </div>
                <div>
                    <input id="user_age" maxlength="2" pattern="[0-9{10}]+" type="number" class="input" placeholder="Age" />
                </div>
                <div>
                    <select class="input" id="user_gender">
                        <option>Gender</option>
                        <option>Male</option>
                        <option>Female</option>
                    </select>
                </div>
                <div>
                    <input id="user_weight" maxlength="3" pattern="[0-9{10}]+" class="input" placeholder="Weight In Kg" />
                </div>
                <div>
                    <input id="user_height" maxlength="3" pattern="[0-9{10}]+" class="input" placeholder="Height In Cm" />
                </div>
                <div>
                    <select class="input" id="user_package">
                        <option>Package</option>
                        <option>Weight Training (700 rps)</option>
                        <option>+ Cardio(1000 rps)</option>
                    </select>
                </div>
                <div>
                    <select class="input" id="user_service">
                        <option>Service</option>
                        <option>Weight Lose</option>
                        <option>Weight Gain</option>
                    </select>
                </div>
                <div>
                    <input class="input" placeholder="trainer_id" id="asign_trainer">
                </div>
                <div>
                    <input class="input" pattern="[0-9{10}]+" required="true" placeholder="Contact number"
                        id="user_number" />
                </div>
                <div>
                    <input class="input" pattern="[a-zA-Z0-9!@#$$%^&*()_+:>?|\]+" type="password"
                        placeholder="Enter Password" id="user_password" />
                </div>
                <div>
                    <input class="input" pattern="[a-zA-Z0-9!@#$$%^&*()_+:>?|\]+" type="password"
                        placeholder="Confirm Password" id="user_confirmpassword" />
                </div>
                <div>
                    <input class="input" id="user_photo" placeholder="Photo Link">
                </div>
                <div>
                    <button type="submit">submit</button>
                </div>
            </div>
        </form>
    </section>

    <script>

        function registration(e) {

            e.preventDefault();

            let user_firstname = document.getElementById("user_firstname").value;
            user_lastname = document.getElementById("user_lastname").value;
            user_number = document.getElementById("user_number").value;
            user_password = document.getElementById("user_password").value;
            user_confirmpassword = document.getElementById("user_confirmpassword").value;
            asign_trainer = document.getElementById("asign_trainer").value;
            user_age = document.getElementById("user_age").value;
            user_weight = document.getElementById("user_weight").value;
            user_height = document.getElementById("user_height").value;
            user_package = document.getElementById("user_package").value;
            user_service = document.getElementById("user_service").value;
            user_gender = document.getElementById("user_gender").value;
            user_photo = document.getElementById("user_photo").value;
            addressline1 = "";
            addressline2 = "";
            pincode = "";
            city = "";
            state = "";
            user_uuid = uuidv4();


            let user_data = JSON.parse(localStorage.getItem('user_data')) || [];

            let exist = user_data.length &&
                JSON.parse(localStorage.getItem('user_data')).some(data => data.user_number.toLowerCase() == user_number.toLowerCase());
            if (!exist) {
                if (user_password == user_confirmpassword) {
                    user_data.push({
                        user_firstname,
                        user_lastname,
                        user_number,
                        user_confirmpassword,
                        user_password,
                        user_age,
                        asign_trainer,
                        user_weight,
                        user_height,
                        user_package,
                        user_service,
                        user_photo,
                        user_gender,
                        addressline1,
                        addressline2,
                        pincode,
                        city,
                        state,
                        user_uuid
                    });

                    localStorage.setItem('user_data', JSON.stringify(user_data));
                    document.querySelector('form').reset();
                    document.getElementById('user_number').focus();
                    alert('Account created Successfully');
                    location.href = "../ADMIN/client listpage.html";
                }
                else {
                    alert("Confirmpassword is not correct!!!")
                }
            }
            else {
                alert('Sorry the User already Exist!! \n Try with different Phone number or email');
                document.querySelector('form').reset();
            }

        }

    </script>
<script src="https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuidv4.min.js"></script>

</body>

</html>
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>fitnesswebsite</title>
        <link rel="stylesheet" href="../../assets/css/addmoretrainerstyle.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <body>
        <header class="header">
            <div class="logo">
                <img src="../../assets/img/logonew2.png" width="200px" alt="logo"/>
            </div>
         </header>
    <section>
    <form role="form" onsubmit="trainerregistration(event)" >
    <div  class="details">
        <div>
             <label>Trainer Name :</label>
             <input id="trainer_name" type="name" id="name" required="true" placeholder="name" />
        </div>
        <div>
                <label>age :</label>
                <input pattern="[0-9{10}]+" id="trainer_age" placeholder="age"/>
        </div>
        <div>
            <label>Gender :</label>
            <select id="Trainer_gender" >
            <option>Select</option>
            <option>Male</option>
            <option>Female</option>
            </select>
        </div>
            <div>
                <label>Address :</label>
                <textarea id="Trainer_address"></textarea>
            </div>
            <div>
                <label>Experience :</label>
                <textarea id="Trainer_Experience"></textarea>
               </div>
            <div>
                <label>Achivements :</label>
                <textarea id="Trainer_Achivements"></textarea>
            </div>
            <div>
            <label>PHONE NUMBER :</label>
            <input id="trainer_number" pattern="[0-9{10}]+" required= "true" placeholder="Contact number"/>
            </div>
            <div>
                <label>CREATE PASSWORD :</label>
                <input id="trainer_password" type="password" required= "true" placeholder="#PASSWORD"/>
            </div>
            <div>
                <label>CONFIRM PASSWORD :</label>
                <input id="trainer_confirmpassword" type="password" required= "true" placeholder="#PASSWORD"/>
            </div>
            <div>
            <label>Upload profile photo :</label>
            <input type="file" />
            <div>
            <button type="submit">Submit</button>
            </div>
            </div>
        </form>
    </section>
    <script>

        function trainerregistration(e){
        
            e.preventDefault();

            let trainer_name = document.getElementById("trainer_name").value;
                trainer_age = document.getElementById("trainer_age").value;  
                trainer_number = document.getElementById("trainer_number").value; 
                trainer_password = document.getElementById("trainer_password").value; 
                trainer_confirmpassword = document.getElementById("trainer_confirmpassword").value; 
                Trainer_address = document.getElementById("Trainer_address").value;
                Trainer_gender = document.getElementById("Trainer_gender").value;
                Trainer_Experience = document.getElementById("Trainer_Experience").value;
                Trainer_Achivements = document.getElementById("Trainer_Achivements").value;
                trainer_uuid=uuidv4();

            let trainer_data = JSON.parse(localStorage.getItem('trainer_data')) || [];

            let exist = trainer_data.length &&
            JSON.parse(localStorage.getItem('trainer_data')).some(data =>data.trainer_number.toLowerCase() == trainer_number.toLowerCase());

        if(!exist){
        if(trainer_password == trainer_confirmpassword){
            trainer_data.push({
            trainer_name: trainer_name,
            trainer_age:  trainer_age,
            trainer_number: trainer_number,
            trainer_password: trainer_password,
            trainer_confirmpassword: trainer_confirmpassword,
            Trainer_address: Trainer_address,
            Trainer_gender: Trainer_gender,
            Trainer_Achivements: Trainer_Achivements,
            Trainer_Experience: Trainer_Experience,
            trainer_uuid: trainer_uuid,
        });

        localStorage.setItem('trainer_data', JSON.stringify(trainer_data));
        document.querySelector('form').reset();
        document.getElementById('trainer_number').focus();
        alert("New Trainer Added successfully");
        window.location.href = "../ADMIN/trainerlist.html";
        }
        else{
            alert("Confirmpassword is not correct!!!")
        }
    }
    else{
        alert('Sorry the User already Exist!! \n Try with different Phone number or email');
        document.querySelector('form').reset();
    }
    
    }

        </script>
        <script src="https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuidv4.min.js"></script>
    </body>
    </html>
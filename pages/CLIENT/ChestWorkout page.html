<!DOCTYPE html>
<html lang="en">

<head>
    <title>Workouts</title>
    <link rel="stylesheet" href="../../assets/css/workout style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <header class="header">
        <div class="logo">
            <a href="../CLIENT/Workout main page.html">
            <img src="../../assets/img/logonew2.png" width="200px" alt="logo">
            </a>
        </div>
    </header>
    <div class="workoutlist">

    </div>
    <footer>
        <div class="footerbtm">Copyright Â© 2022 Fit Expert Fitness . All Rights Reserved.Website Designed by Arul Ajun
        </div>
    </footer>

    <script>
        
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const catagory_id = urlParams.get("catagory_id");

        const add_workout = JSON.parse(localStorage.getItem("catagory_id"));
        // const workout_Id = add_workout.workout_uuid;

        // array.filter()
        const Workout = add_workout.filter(function find(e) {
            return e.category === catagory_id;
        });


        for (let i = 0; i < Workout.length; i++) {
            const workout_card = document.createElement("div");
            workout_card.setAttribute("class", "workout");
            console.log(workout_card);

            const workout_title = document.createElement("div");
            workout_title.setAttribute("class", "workoutname");
            workout_card.append(workout_title);

            const title = document.createElement("h2");
            title.innerText = Workout[i].workoutname;
            workout_title.append(title);

            const imageContainer = document.createElement("div");
            workout_card.append(imageContainer);

            const workoutImg = document.createElement("img");
            workoutImg.setAttribute("id", "workoutphoto");
            workoutImg.setAttribute("src", Workout[i].workoutphoto);
            workoutImg.setAttribute("width", "250px");
            workoutImg.setAttribute("height", "200px");
            workoutImg.setAttribute("alt", "image");
            imageContainer.append(workoutImg);

            const playContainer = document.createElement("div");
            workout_card.append(playContainer);

            const playbtn = document.createElement("button");
            playbtn.setAttribute("class", "playbtn");
            playbtn.setAttribute("data-workoutname", Workout[i].workoutname);
            playbtn.innerText = "Play";
            playContainer.append(playbtn);

            document.querySelector("div.workoutlist").append(workout_card);
        }

        const playbtns = document.querySelectorAll(".playbtn");
        playbtns.forEach((playbtn) => {
            playbtn.addEventListener("click", (event) => {
                const workoutname = playbtn.dataset.workoutname;
                const url = `../WORKOUTS/workoutvideo.html?workoutname=${encodeURIComponent(workoutname)}`;
                window.location.href = url;
            });
        });
        
    </script>

</body>

</html>